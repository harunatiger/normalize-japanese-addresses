function t(t,e,s,i){return new(s||(s=Promise))((function(r,n){function o(t){try{c(i.next(t))}catch(t){n(t)}}function a(t){try{c(i.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"function"==typeof SuppressedError&&SuppressedError;var s,i={},r={},n={};var o,a,c,h={};function l(){if(o)return h;o=1,Object.defineProperty(h,"__esModule",{value:!0});return h.default={"〇":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9,"０":0,"１":1,"２":2,"３":3,"４":4,"５":5,"６":6,"７":7,"８":8,"９":9},h}function d(){return a||(a=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.zen2han=t.n2kan=t.kan2n=t.splitLargeNumber=t.normalize=t.smallNumbers=t.largeNumbers=void 0;const e=(s||(s=1,Object.defineProperty(n,"__esModule",{value:!0}),n.default={"零":"〇","壱":"一","壹":"一","弐":"二","弍":"二","貳":"二","貮":"二","参":"三","參":"三","肆":"四","伍":"五","陸":"六","漆":"七","捌":"八","玖":"九","拾":"十","廿":"二十","陌":"百","佰":"百","阡":"千","仟":"千","萬":"万"}),n),i=l();function r(e){if(e.match(/^[0-9]+$/))return Number(e);let s=o(e),r=0;for(const e in t.smallNumbers){const n=new RegExp(`(.*)${e}`),o=s.match(n);if(o){let n=1;o[1]&&(n=o[1].match(/^[0-9]+$/)?Number(o[1]):i.default[o[1]]),r+=n*t.smallNumbers[e],s=s.replace(o[0],"")}}if(s)if(s.match(/^[0-9]+$/))r+=Number(s);else for(let t=0;t<s.length;t++){const e=s[t],n=s.length-t-1;r+=i.default[e]*10**n}return r}function o(t){return t.replace(/[０-９]/g,(t=>String.fromCharCode(t.charCodeAt(0)-65248)))}t.largeNumbers={"兆":1e12,"億":1e8,"万":1e4},t.smallNumbers={"千":1e3,"百":100,"十":10},t.normalize=function(t){for(const s in e.default){const i=new RegExp(s,"g");t=t.replace(i,e.default[s])}return t},t.splitLargeNumber=function(e){let s=e;const i={};for(const e in t.largeNumbers){const t=new RegExp(`(.+)${e}`),n=s.match(t);n?(i[e]=r(n[1]),s=s.replace(n[0],"")):i[e]=0}return i["千"]=s?r(s):0,i},t.kan2n=r,t.n2kan=function(e){const s=Object.keys(i.default);let r=e,n="";for(const e in t.smallNumbers){const i=Math.floor(r/t.smallNumbers[e]);i&&(r-=i*t.smallNumbers[e],n=1===i?`${n}${e}`:`${n}${s[i]}${e}`)}return r&&(n=`${n}${s[r]}`),n},t.zen2han=o}(r)),r}var u=function(){if(c)return i;c=1,Object.defineProperty(i,"__esModule",{value:!0}),i.findKanjiNumbers=i.number2kanji=i.kanji2number=void 0;const t=d(),e=l();return i.kanji2number=function(s){if((s=(0,t.normalize)(s)).match("〇")||s.match(/^[〇一二三四五六七八九]+$/)){for(const t in e.default){const i=new RegExp(t,"g");s=s.replace(i,e.default[t].toString())}return Number(s)}{let e=0;const i=(0,t.splitLargeNumber)(s);for(const s in t.largeNumbers)if(i[s]){e+=t.largeNumbers[s]*i[s]}if(!Number.isInteger(e)||!Number.isInteger(i["千"]))throw new TypeError("The attribute of kanji2number() must be a Japanese numeral as integer.");return e+i["千"]}},i.number2kanji=function(s){if(!s.toString().match(/^[0-9]+$/))throw new TypeError("The attribute of number2kanji() must be integer.");Object.keys(e.default);let i=s,r="";for(const e in t.largeNumbers){const s=Math.floor(i/t.largeNumbers[e]);s&&(i-=s*t.largeNumbers[e],r=`${r}${(0,t.n2kan)(s)}${e}`)}return i&&(r=`${r}${(0,t.n2kan)(i)}`),r||"〇"},i.findKanjiNumbers=function(t){const e="([0-9０-９]*)|([〇一二三四五六七八九壱壹弐弍貳貮参參肆伍陸漆捌玖]*)",s=`((${e})(千|阡|仟))?((${e})(百|陌|佰))?((${e})(十|拾))?(${e})?`,i=new RegExp(`((${s}兆)?(${s}億)?(${s}(万|萬))?${s})`,"g"),r=t.match(i);return r?r.filter((t=>!(t.match(/^[0-9０-９]+$/)||!t.length||"兆"===t||"億"===t||"万"===t||"萬"===t))):[]},i}();const f={japaneseAddressesApi:"https://japanese-addresses-v2.geoloniamaps.com/api/ja",cacheSize:1e3},p=(t,e)=>{const s=e||{};let i=new URL(`${f.japaneseAddressesApi}${t}`).toString();f.geoloniaApiKey&&(i+=`?geolonia-api-key=${f.geoloniaApiKey}`);const r={};let n;if(void 0!==s.length&&void 0!==s.offset&&(r.Range=`bytes=${s.offset}-${s.offset+s.length-1}`),"undefined"!=typeof fetch)n=fetch;else{if("undefined"==typeof window)throw new Error("fetch is not available in this environment");n=window.fetch}return n(i,{headers:r})},g=t=>{const e=u.findKanjiNumbers(t);for(let s=0;s<e.length;s++)try{t=t.replace(e[s],u.kanji2number(e[s]))}catch(t){}return t},m=t=>t.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(t=>String.fromCharCode(t.charCodeAt(0)-65248))),v=[{pref:"香川県",city:"仲多度郡まんのう町",town:"勝浦",pattern:"^字?家[6六]",result:"家六"},{pref:"愛知県",city:"あま市",town:"西今宿",pattern:"^字?梶村[1一]",result:"梶村一"},{pref:"香川県",city:"丸亀市",town:"原田町",pattern:"^字?東三分[1一]",result:"東三分一"}],_=[[{src:"亞",dst:"亜"},{src:"圍",dst:"囲"},{src:"壹",dst:"壱"},{src:"榮",dst:"栄"},{src:"驛",dst:"駅"},{src:"應",dst:"応"},{src:"櫻",dst:"桜"},{src:"假",dst:"仮"},{src:"會",dst:"会"},{src:"懷",dst:"懐"},{src:"覺",dst:"覚"},{src:"樂",dst:"楽"},{src:"陷",dst:"陥"},{src:"歡",dst:"歓"},{src:"氣",dst:"気"},{src:"戲",dst:"戯"},{src:"據",dst:"拠"},{src:"挾",dst:"挟"},{src:"區",dst:"区"},{src:"徑",dst:"径"},{src:"溪",dst:"渓"},{src:"輕",dst:"軽"},{src:"藝",dst:"芸"},{src:"儉",dst:"倹"},{src:"圈",dst:"圏"},{src:"權",dst:"権"},{src:"嚴",dst:"厳"},{src:"恆",dst:"恒"},{src:"國",dst:"国"},{src:"齋",dst:"斎"},{src:"雜",dst:"雑"},{src:"蠶",dst:"蚕"},{src:"殘",dst:"残"},{src:"兒",dst:"児"},{src:"實",dst:"実"},{src:"釋",dst:"釈"},{src:"從",dst:"従"},{src:"縱",dst:"縦"},{src:"敍",dst:"叙"},{src:"燒",dst:"焼"},{src:"條",dst:"条"},{src:"剩",dst:"剰"},{src:"壤",dst:"壌"},{src:"釀",dst:"醸"},{src:"眞",dst:"真"},{src:"盡",dst:"尽"},{src:"醉",dst:"酔"},{src:"髓",dst:"髄"},{src:"聲",dst:"声"},{src:"竊",dst:"窃"},{src:"淺",dst:"浅"},{src:"錢",dst:"銭"},{src:"禪",dst:"禅"},{src:"爭",dst:"争"},{src:"插",dst:"挿"},{src:"騷",dst:"騒"},{src:"屬",dst:"属"},{src:"對",dst:"対"},{src:"滯",dst:"滞"},{src:"擇",dst:"択"},{src:"單",dst:"単"},{src:"斷",dst:"断"},{src:"癡",dst:"痴"},{src:"鑄",dst:"鋳"},{src:"敕",dst:"勅"},{src:"鐵",dst:"鉄"},{src:"傳",dst:"伝"},{src:"黨",dst:"党"},{src:"鬪",dst:"闘"},{src:"屆",dst:"届"},{src:"腦",dst:"脳"},{src:"廢",dst:"廃"},{src:"發",dst:"発"},{src:"蠻",dst:"蛮"},{src:"拂",dst:"払"},{src:"邊",dst:"辺"},{src:"瓣",dst:"弁"},{src:"寶",dst:"宝"},{src:"沒",dst:"没"},{src:"滿",dst:"満"},{src:"藥",dst:"薬"},{src:"餘",dst:"余"},{src:"樣",dst:"様"},{src:"亂",dst:"乱"},{src:"兩",dst:"両"},{src:"禮",dst:"礼"},{src:"靈",dst:"霊"},{src:"爐",dst:"炉"},{src:"灣",dst:"湾"},{src:"惡",dst:"悪"},{src:"醫",dst:"医"},{src:"飮",dst:"飲"},{src:"營",dst:"営"},{src:"圓",dst:"円"},{src:"歐",dst:"欧"},{src:"奧",dst:"奥"},{src:"價",dst:"価"},{src:"繪",dst:"絵"},{src:"擴",dst:"拡"},{src:"學",dst:"学"},{src:"罐",dst:"缶"},{src:"勸",dst:"勧"},{src:"觀",dst:"観"},{src:"歸",dst:"帰"},{src:"犧",dst:"犠"},{src:"擧",dst:"挙"},{src:"狹",dst:"狭"},{src:"驅",dst:"駆"},{src:"莖",dst:"茎"},{src:"經",dst:"経"},{src:"繼",dst:"継"},{src:"缺",dst:"欠"},{src:"劍",dst:"剣"},{src:"檢",dst:"検"},{src:"顯",dst:"顕"},{src:"廣",dst:"広"},{src:"鑛",dst:"鉱"},{src:"碎",dst:"砕"},{src:"劑",dst:"剤"},{src:"參",dst:"参"},{src:"慘",dst:"惨"},{src:"絲",dst:"糸"},{src:"辭",dst:"辞"},{src:"舍",dst:"舎"},{src:"壽",dst:"寿"},{src:"澁",dst:"渋"},{src:"肅",dst:"粛"},{src:"將",dst:"将"},{src:"證",dst:"証"},{src:"乘",dst:"乗"},{src:"疊",dst:"畳"},{src:"孃",dst:"嬢"},{src:"觸",dst:"触"},{src:"寢",dst:"寝"},{src:"圖",dst:"図"},{src:"穗",dst:"穂"},{src:"樞",dst:"枢"},{src:"齊",dst:"斉"},{src:"攝",dst:"摂"},{src:"戰",dst:"戦"},{src:"潛",dst:"潜"},{src:"雙",dst:"双"},{src:"莊",dst:"荘"},{src:"裝",dst:"装"},{src:"藏",dst:"蔵"},{src:"續",dst:"続"},{src:"體",dst:"体"},{src:"臺",dst:"台"},{src:"澤",dst:"沢"},{src:"膽",dst:"胆"},{src:"彈",dst:"弾"},{src:"蟲",dst:"虫"},{src:"廳",dst:"庁"},{src:"鎭",dst:"鎮"},{src:"點",dst:"点"},{src:"燈",dst:"灯"},{src:"盜",dst:"盗"},{src:"獨",dst:"独"},{src:"貳",dst:"弐"},{src:"霸",dst:"覇"},{src:"賣",dst:"売"},{src:"髮",dst:"髪"},{src:"祕",dst:"秘"},{src:"佛",dst:"仏"},{src:"變",dst:"変"},{src:"辯",dst:"弁"},{src:"豐",dst:"豊"},{src:"飜",dst:"翻"},{src:"默",dst:"黙"},{src:"與",dst:"与"},{src:"譽",dst:"誉"},{src:"謠",dst:"謡"},{src:"覽",dst:"覧"},{src:"獵",dst:"猟"},{src:"勵",dst:"励"},{src:"齡",dst:"齢"},{src:"勞",dst:"労"},{src:"壓",dst:"圧"},{src:"爲",dst:"為"},{src:"隱",dst:"隠"},{src:"衞",dst:"衛"},{src:"鹽",dst:"塩"},{src:"毆",dst:"殴"},{src:"穩",dst:"穏"},{src:"畫",dst:"画"},{src:"壞",dst:"壊"},{src:"殼",dst:"殻"},{src:"嶽",dst:"岳"},{src:"卷",dst:"巻"},{src:"關",dst:"関"},{src:"顏",dst:"顔"},{src:"僞",dst:"偽"},{src:"舊",dst:"旧"},{src:"峽",dst:"峡"},{src:"曉",dst:"暁"},{src:"勳",dst:"勲"},{src:"惠",dst:"恵"},{src:"螢",dst:"蛍"},{src:"鷄",dst:"鶏"},{src:"縣",dst:"県"},{src:"險",dst:"険"},{src:"獻",dst:"献"},{src:"驗",dst:"験"},{src:"效",dst:"効"},{src:"號",dst:"号"},{src:"濟",dst:"済"},{src:"册",dst:"冊"},{src:"棧",dst:"桟"},{src:"贊",dst:"賛"},{src:"齒",dst:"歯"},{src:"濕",dst:"湿"},{src:"寫",dst:"写"},{src:"收",dst:"収"},{src:"獸",dst:"獣"},{src:"處",dst:"処"},{src:"稱",dst:"称"},{src:"奬",dst:"奨"},{src:"淨",dst:"浄"},{src:"繩",dst:"縄"},{src:"讓",dst:"譲"},{src:"囑",dst:"嘱"},{src:"愼",dst:"慎"},{src:"粹",dst:"粋"},{src:"隨",dst:"随"},{src:"數",dst:"数"},{src:"靜",dst:"静"},{src:"專",dst:"専"},{src:"踐",dst:"践"},{src:"纖",dst:"繊"},{src:"壯",dst:"壮"},{src:"搜",dst:"捜"},{src:"總",dst:"総"},{src:"臟",dst:"臓"},{src:"墮",dst:"堕"},{src:"帶",dst:"帯"},{src:"瀧",dst:"滝"},{src:"擔",dst:"担"},{src:"團",dst:"団"},{src:"遲",dst:"遅"},{src:"晝",dst:"昼"},{src:"聽",dst:"聴"},{src:"遞",dst:"逓"},{src:"轉",dst:"転"},{src:"當",dst:"当"},{src:"稻",dst:"稲"},{src:"讀",dst:"読"},{src:"惱",dst:"悩"},{src:"拜",dst:"拝"},{src:"麥",dst:"麦"},{src:"拔",dst:"抜"},{src:"濱",dst:"浜"},{src:"竝",dst:"並"},{src:"辨",dst:"弁"},{src:"舖",dst:"舗"},{src:"襃",dst:"褒"},{src:"萬",dst:"万"},{src:"譯",dst:"訳"},{src:"豫",dst:"予"},{src:"搖",dst:"揺"},{src:"來",dst:"来"},{src:"龍",dst:"竜"},{src:"壘",dst:"塁"},{src:"隸",dst:"隷"},{src:"戀",dst:"恋"},{src:"樓",dst:"楼"},{src:"鰺",dst:"鯵"},{src:"鶯",dst:"鴬"},{src:"蠣",dst:"蛎"},{src:"攪",dst:"撹"},{src:"竈",dst:"竃"},{src:"灌",dst:"潅"},{src:"諫",dst:"諌"},{src:"頸",dst:"頚"},{src:"礦",dst:"砿"},{src:"蘂",dst:"蕊"},{src:"靱",dst:"靭"},{src:"賤",dst:"賎"},{src:"壺",dst:"壷"},{src:"礪",dst:"砺"},{src:"檮",dst:"梼"},{src:"濤",dst:"涛"},{src:"邇",dst:"迩"},{src:"蠅",dst:"蝿"},{src:"檜",dst:"桧"},{src:"儘",dst:"侭"},{src:"藪",dst:"薮"},{src:"籠",dst:"篭"},{src:"彌",dst:"弥"},{src:"麩",dst:"麸"},{src:"驒",dst:"騨"}]].flat().reduce(((t,e)=>{const s=`(${e.src}|${e.dst})`;return Object.assign(Object.assign({},t),{[e.src]:s,[e.dst]:s})}),{}),y=new RegExp(Array.from(new Set(Object.values(_))).join("|"),"g"),b=t=>{let e=t;return e=e.replace(/三栄町|四谷三栄町/g,"(三栄町|四谷三栄町)").replace(/鬮野川|くじ野川|くじの川/g,"(鬮野川|くじ野川|くじの川)").replace(/柿碕町|柿さき町/g,"(柿碕町|柿さき町)").replace(/通り|とおり/g,"(通り|とおり)").replace(/埠頭|ふ頭/g,"(埠頭|ふ頭)").replace(/番町|番丁/g,"(番町|番丁)").replace(/大冝|大宜/g,"(大冝|大宜)").replace(/穝|さい/g,"(穝|さい)").replace(/杁|えぶり/g,"(杁|えぶり)").replace(/薭|稗|ひえ|ヒエ/g,"(薭|稗|ひえ|ヒエ)").replace(/[之ノの]/g,"[之ノの]").replace(/[ヶケが]/g,"[ヶケが]").replace(/[ヵカか力]/g,"[ヵカか力]").replace(/[ッツっつ]/g,"[ッツっつ]").replace(/[ニ二]/g,"[ニ二]").replace(/[ハ八]/g,"[ハ八]").replace(/塚|塚/g,"(塚|塚)").replace(/釜|竈/g,"(釜|竈)").replace(/條|条/g,"(條|条)").replace(/狛|拍/g,"(狛|拍)").replace(/藪|薮/g,"(藪|薮)").replace(/渕|淵/g,"(渕|淵)").replace(/エ|ヱ|え/g,"(エ|ヱ|え)").replace(/曾|曽/g,"(曾|曽)").replace(/舟|船/g,"(舟|船)").replace(/莵|菟/g,"(莵|菟)").replace(/市|巿/g,"(市|巿)").replace(/崎|﨑/g,"(崎|﨑)"),e=e.replace(y,(t=>_[t])),e};var w,k={exports:{}};
/* @license
Papa Parse
v5.5.1
https://github.com/mholt/PapaParse
License: MIT
*/var S=e((w||(w=1,k.exports=function t(){var e,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==s?s:{},i=!s.document&&!!s.postMessage,r=s.IS_PAPA_WORKER||!1,n={},o=0,a={};function c(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let e=this._config.newline;e||(n=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,n)),t=[...t.split(e).slice(i)].join(e)}this.isFirstChunk&&w(this._config.beforeFirstChunk)&&void 0!==(n=this._config.beforeFirstChunk(t))&&(t=n),this.isFirstChunk=!1,this._halted=!1,i=this._partialLine+t;var n=(this._partialLine="",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=n.meta.cursor,this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),n&&n.data&&(this._rowCount+=n.data.length),i=this._finished||this._config.preview&&this._rowCount>=this._config.preview,r)s.postMessage({results:n,workerId:a.WORKER_ID,finished:i});else if(w(this._config.chunk)&&!e){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!i||!w(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(t){w(this._config.error)?this._config.error(t):r&&this._config.error&&s.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function h(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),c.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t,s=this._config.downloadRequestHeaders;for(t in s)e.setRequestHeader(t,s[t])}var r;this._config.chunkSize&&(r=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+r));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(t=>null!==(t=t.getResponseHeader("Content-Range"))?parseInt(t.substring(t.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){t=e.statusText||t,this._sendError(new Error(t))}}function l(t){(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),c.call(this,t);var e,s,i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,s=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input,r=(this._config.chunkSize&&(r=Math.min(this._start+this._config.chunkSize,this._input.size),t=s.call(t,this._start,r)),e.readAsText(t,this._config.encoding));i||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function d(t){var e;c.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){var t,s;if(!this._finished)return t=this._config.chunkSize,e=t?(s=e.substring(0,t),e.substring(t)):(s=e,""),this._finished=!e,this.parseChunk(s)}}function u(t){c.call(this,t=t||{});var e=[],s=!0,i=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):s=!0},this._streamData=b((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=b((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=b((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=b((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(t){var e,s,i,r,n=Math.pow(2,53),o=-n,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,h=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,d=0,u=0,f=!1,m=!1,v=[],_={data:[],errors:[],meta:{}};function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function k(){if(_&&i&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines&&(_.data=_.data.filter((function(t){return!b(t)}))),S()){if(_)if(Array.isArray(_.data[0])){for(var e=0;S()&&e<_.data.length;e++)_.data[e].forEach(l);_.data.splice(0,1)}else _.data.forEach(l);function l(e,s){w(t.transformHeader)&&(e=t.transformHeader(e,s)),v.push(e)}}function s(e,s){for(var i=t.header?{}:[],r=0;r<e.length;r++){var a=r,l=e[r];l=((e,s)=>(e=>(t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)))(e)?"true"===s||"TRUE"===s||"false"!==s&&"FALSE"!==s&&((t=>{if(c.test(t)&&(t=parseFloat(t),o<t&&t<n))return 1})(s)?parseFloat(s):h.test(s)?new Date(s):""===s?null:s):s)(a=t.header?r>=v.length?"__parsed_extra":v[r]:a,l=t.transform?t.transform(l,a):l),"__parsed_extra"===a?(i[a]=i[a]||[],i[a].push(l)):i[a]=l}return t.header&&(r>v.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+r,u+s):r<v.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+r,u+s)),i}var r;_&&(t.header||t.dynamicTyping||t.transform)&&(r=1,!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(s),r=_.data.length):_.data=s(_.data,0),t.header&&_.meta&&(_.meta.fields=v),u+=r)}function S(){return t.header&&0===v.length}function x(t,e,s,i){t={type:t,code:e,message:s},void 0!==i&&(t.row=i),_.errors.push(t)}w(t.step)&&(r=t.step,t.step=function(e){_=e,S()?k():(k(),0!==_.data.length&&(d+=e.data.length,t.preview&&d>t.preview?s.abort():(_.data=_.data[0],r(_,l))))}),this.parse=function(r,n,o){var c=t.quoteChar||'"';return t.newline||(t.newline=this.guessLineEndings(r,c)),i=!1,t.delimiter?w(t.delimiter)&&(t.delimiter=t.delimiter(r),_.meta.delimiter=t.delimiter):((c=((e,s,i,r,n)=>{var o,c,h,l;n=n||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<n.length;d++){for(var u,f=n[d],p=0,m=0,v=0,_=(h=void 0,new g({comments:r,delimiter:f,newline:s,preview:10}).parse(e)),y=0;y<_.data.length;y++)i&&b(_.data[y])?v++:(m+=u=_.data[y].length,void 0===h?h=u:0<u&&(p+=Math.abs(u-h),h=u));0<_.data.length&&(m/=_.data.length-v),(void 0===c||p<=c)&&(void 0===l||l<m)&&1.99<m&&(c=p,o=f,l=m)}return{successful:!!(t.delimiter=o),bestDelimiter:o}})(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=c.bestDelimiter:(i=!0,t.delimiter=a.DefaultDelimiter),_.meta.delimiter=t.delimiter),c=y(t),t.preview&&t.header&&c.preview++,e=r,s=new g(c),_=s.parse(e,n,o),k(),f?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return f},this.pause=function(){f=!0,s.abort(),e=w(t.chunk)?"":e.substring(s.getCharIndex())},this.resume=function(){l.streamer._halted?(f=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,s.abort(),_.meta.aborted=!0,w(t.complete)&&t.complete(_),e=""},this.guessLineEndings=function(t,e){t=t.substring(0,1048576),e=new RegExp(p(e)+"([^]*?)"+p(e),"gm");var s=(t=t.replace(e,"")).split("\r");if(t=1<(e=t.split("\n")).length&&e[0].length<s[0].length,1===s.length||t)return"\n";for(var i=0,r=0;r<s.length;r++)"\n"===s[r][0]&&i++;return i>=s.length/2?"\r\n":"\r"}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e=(t=t||{}).delimiter,s=t.newline,i=t.comments,r=t.step,n=t.preview,o=t.fastMode,c=null,h=null==t.quoteChar?'"':t.quoteChar,l=h;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof e||-1<a.BAD_DELIMITERS.indexOf(e))&&(e=","),i===e)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==s&&"\r"!==s&&"\r\n"!==s&&(s="\n");var d=0,u=!1;this.parse=function(a,f,g){if("string"!=typeof a)throw new Error("Input must be a string");var m=a.length,v=e.length,_=s.length,y=i.length,b=w(r),k=[],S=[],x=[],E=d=0;if(!a)return I();if(o||!1!==o&&-1===a.indexOf(h)){for(var z=a.split(s),A=0;A<z.length;A++){if(x=z[A],d+=x.length,A!==z.length-1)d+=s.length;else if(g)return I();if(!i||x.substring(0,y)!==i){if(b){if(k=[],C(x.split(e)),M(),u)return I()}else C(x.split(e));if(n&&n<=A)return k=k.slice(0,n),I(!0)}}return I()}for(var L=a.indexOf(e,d),O=a.indexOf(s,d),T=new RegExp(p(l)+p(h),"g"),F=a.indexOf(h,d);;)if(a[d]===h)for(F=d,d++;;){if(-1===(F=a.indexOf(h,F+1)))return g||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:d}),j();if(F===m-1)return j(a.substring(d,F).replace(T,h));if(h===l&&a[F+1]===l)F++;else if(h===l||0===F||a[F-1]!==l){-1!==L&&L<F+1&&(L=a.indexOf(e,F+1));var R=D(-1===(O=-1!==O&&O<F+1?a.indexOf(s,F+1):O)?L:Math.min(L,O));if(a.substr(F+1+R,v)===e){x.push(a.substring(d,F).replace(T,h)),a[d=F+1+R+v]!==h&&(F=a.indexOf(h,d)),L=a.indexOf(e,d),O=a.indexOf(s,d);break}if(R=D(O),a.substring(F+1+R,F+1+R+_)===s){if(x.push(a.substring(d,F).replace(T,h)),$(F+1+R+_),L=a.indexOf(e,d),F=a.indexOf(h,d),b&&(M(),u))return I();if(n&&k.length>=n)return I(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:d}),F++}}else if(i&&0===x.length&&a.substring(d,d+y)===i){if(-1===O)return I();d=O+_,O=a.indexOf(s,d),L=a.indexOf(e,d)}else if(-1!==L&&(L<O||-1===O))x.push(a.substring(d,L)),d=L+v,L=a.indexOf(e,d);else{if(-1===O)break;if(x.push(a.substring(d,O)),$(O+_),b&&(M(),u))return I();if(n&&k.length>=n)return I(!0)}return j();function C(t){k.push(t),E=d}function D(t){var e=0;return-1!==t&&(t=a.substring(F+1,t))&&""===t.trim()?t.length:e}function j(t){return g||(void 0===t&&(t=a.substring(d)),x.push(t),d=m,C(x),b&&M()),I()}function $(t){d=t,C(x),x=[],O=a.indexOf(s,d)}function I(i){if(t.header&&!f&&k.length){var r=k[0],n={},o=new Set(r);let e=!1;for(let s=0;s<r.length;s++){let i=r[s];if(n[i=w(t.transformHeader)?t.transformHeader(i,s):i]){let t,a=n[i];for(;t=i+"_"+a,a++,o.has(t););o.add(t),r[s]=t,n[i]++,e=!0,(c=null===c?{}:c)[t]=i}else n[i]=1,r[s]=i;o.add(i)}e&&console.warn("Duplicate headers found and renamed.")}return{data:k,errors:S,meta:{delimiter:e,linebreak:s,aborted:u,truncated:!!i,cursor:E+(f||0),renamedHeaders:c}}}function M(){r(I()),k=[],S=[]}},this.abort=function(){u=!0},this.getCharIndex=function(){return d}}function m(t){var e=t.data,s=n[e.workerId],i=!1;if(e.error)s.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){i=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_,resume:_};if(w(s.userStep)){for(var o=0;o<e.results.data.length&&(s.userStep({data:e.results.data[o],errors:e.results.errors,meta:e.results.meta},r),!i);o++);delete e.results}else w(s.userChunk)&&(s.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!i&&v(e.workerId,e.results)}function v(t,e){var s=n[t];w(s.userComplete)&&s.userComplete(e),s.terminate(),delete n[t]}function _(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e,s=Array.isArray(t)?[]:{};for(e in t)s[e]=y(t[e]);return s}function b(t,e){return function(){t.apply(e,arguments)}}function w(t){return"function"==typeof t}return a.parse=function(e,i){var r=(i=i||{}).dynamicTyping||!1;if(w(r)&&(i.dynamicTypingFunction=r,r={}),i.dynamicTyping=r,i.transform=!!w(i.transform)&&i.transform,!i.worker||!a.WORKERS_SUPPORTED)return r=null,a.NODE_STREAM_INPUT,"string"==typeof e?(e=(t=>65279!==t.charCodeAt(0)?t:t.slice(1))(e),r=new(i.download?h:d)(i)):!0===e.readable&&w(e.read)&&w(e.on)?r=new u(i):(s.File&&e instanceof File||e instanceof Object)&&(r=new l(i)),r.stream(e);(r=(()=>{var e;return!!a.WORKERS_SUPPORTED&&(e=(()=>{var e=s.URL||s.webkitURL||null,i=t.toString();return a.BLOB_URL||(a.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",i,")();"],{type:"text/javascript"})))})(),(e=new s.Worker(e)).onmessage=m,e.id=o++,n[e.id]=e)})()).userStep=i.step,r.userChunk=i.chunk,r.userComplete=i.complete,r.userError=i.error,i.step=w(i.step),i.chunk=w(i.chunk),i.complete=w(i.complete),i.error=w(i.error),delete i.worker,r.postMessage({input:e,config:i,workerId:r.id})},a.unparse=function(t,e){var s=!1,i=!0,r=",",n="\r\n",o='"',c=o+o,h=!1,l=null,d=!1,u=((()=>{if("object"==typeof e){if("string"!=typeof e.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(r=e.delimiter),"boolean"!=typeof e.quotes&&"function"!=typeof e.quotes&&!Array.isArray(e.quotes)||(s=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(h=e.skipEmptyLines),"string"==typeof e.newline&&(n=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(c=e.escapeChar+o),e.escapeFormulae instanceof RegExp?d=e.escapeFormulae:"boolean"==typeof e.escapeFormulae&&e.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}})(),new RegExp(p(o),"g"));if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,h);if("object"==typeof t[0])return f(l||Object.keys(t[0]),t,h)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],h);throw new Error("Unable to serialize unrecognized input");function f(t,e,s){var o="",a=("string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t)&&0<t.length),c=!Array.isArray(e[0]);if(a&&i){for(var h=0;h<t.length;h++)0<h&&(o+=r),o+=g(t[h],h);0<e.length&&(o+=n)}for(var l=0;l<e.length;l++){var d=(a?t:e[l]).length,u=!1,f=a?0===Object.keys(e[l]).length:0===e[l].length;if(s&&!a&&(u="greedy"===s?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===s&&a){for(var p=[],m=0;m<d;m++){var v=c?t[m]:m;p.push(e[l][v])}u=""===p.join("").trim()}if(!u){for(var _=0;_<d;_++){0<_&&!f&&(o+=r);var y=a&&c?t[_]:_;o+=g(e[l][y],_)}l<e.length-1&&(!s||0<d&&!f)&&(o+=n)}}return o}function g(t,e){var i,n;return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(n=!1,d&&"string"==typeof t&&d.test(t)&&(t="'"+t,n=!0),i=t.toString().replace(u,c),(n=n||!0===s||"function"==typeof s&&s(t,e)||Array.isArray(s)&&s[e]||((t,e)=>{for(var s=0;s<e.length;s++)if(-1<t.indexOf(e[s]))return!0;return!1})(i,a.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1))?o+i+o:i)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!s.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=f,a.NetworkStreamer=h,a.FileStreamer=l,a.StringStreamer=d,a.ReadableStreamStreamer=u,s.jQuery&&((e=s.jQuery).fn.parse=function(t){var i=t.config||{},r=[];return this.each((function(t){if("INPUT"!==e(this).prop("tagName").toUpperCase()||"file"!==e(this).attr("type").toLowerCase()||!s.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)r.push({file:this.files[n],inputElem:this,instanceConfig:e.extend({},i)})})),n(),this;function n(){if(0===r.length)w(t.complete)&&t.complete();else{var s,i,n,c,h=r[0];if(w(t.before)){var l=t.before(h.file,h.inputElem);if("object"==typeof l){if("abort"===l.action)return s="AbortError",i=h.file,n=h.inputElem,c=l.reason,void(w(t.error)&&t.error({name:s},i,n,c));if("skip"===l.action)return void o();"object"==typeof l.config&&(h.instanceConfig=e.extend(h.instanceConfig,l.config))}else if("skip"===l)return void o()}var d=h.instanceConfig.complete;h.instanceConfig.complete=function(t){w(d)&&d(t,h.file,h.inputElem),o()},a.parse(h.file,h.instanceConfig)}}function o(){r.splice(0,1),n()}}),r&&(s.onmessage=function(t){t=t.data,void 0===a.WORKER_ID&&t&&(a.WORKER_ID=t.workerId),"string"==typeof t.input?s.postMessage({workerId:a.WORKER_ID,results:a.parse(t.input,t.config),finished:!0}):(s.File&&t.input instanceof File||t.input instanceof Object)&&(t=a.parse(t.input,t.config))&&s.postMessage({workerId:a.WORKER_ID,results:t,finished:!0})}),(h.prototype=Object.create(c.prototype)).constructor=h,(l.prototype=Object.create(c.prototype)).constructor=l,(d.prototype=Object.create(d.prototype)).constructor=d,(u.prototype=Object.create(c.prototype)).constructor=u,a}()),k.exports));const x="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,E=new Set,z="object"==typeof process&&process?process:{},A=(t,e,s,i)=>{"function"==typeof z.emitWarning?z.emitWarning(t,e,s,i):console.error(`[${s}] ${e}: ${t}`)};let L=globalThis.AbortController,O=globalThis.AbortSignal;if(void 0===L){O=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},L=class{constructor(){e()}signal=new O;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==z.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,A("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const T=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),F=t=>T(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?R:null:null;class R extends Array{constructor(t){super(t),this.fill(0)}}class C{heap;length;static#t=!1;static create(t){const e=F(t);if(!e)return[];C.#t=!0;const s=new C(t,e);return C.#t=!1,s}constructor(t,e){if(!C.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class D{#e;#s;#i;#r;#n;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#c;#h;#l;#d;#u;#f;#p;#g;#m;#v;#_;#y;#b;#w;#k;#S;static unsafeExposeInternals(t){return{starts:t.#y,ttls:t.#b,sizes:t.#_,keyMap:t.#h,keyList:t.#l,valList:t.#d,next:t.#u,prev:t.#f,get head(){return t.#p},get tail(){return t.#g},free:t.#m,isBackgroundFetch:e=>t.#x(e),backgroundFetch:(e,s,i,r)=>t.#E(e,s,i,r),moveToTail:e=>t.#z(e),indexes:e=>t.#A(e),rindexes:e=>t.#L(e),isStale:e=>t.#O(e)}}get max(){return this.#e}get maxSize(){return this.#s}get calculatedSize(){return this.#c}get size(){return this.#a}get fetchMethod(){return this.#n}get memoMethod(){return this.#o}get dispose(){return this.#i}get disposeAfter(){return this.#r}constructor(t){const{max:e=0,ttl:s,ttlResolution:i=1,ttlAutopurge:r,updateAgeOnGet:n,updateAgeOnHas:o,allowStale:a,dispose:c,disposeAfter:h,noDisposeOnSet:l,noUpdateTTL:d,maxSize:u=0,maxEntrySize:f=0,sizeCalculation:p,fetchMethod:g,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:_,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:b,ignoreFetchAbort:w}=t;if(0!==e&&!T(e))throw new TypeError("max option must be a nonnegative integer");const k=e?F(e):Array;if(!k)throw new Error("invalid max value: "+e);if(this.#e=e,this.#s=u,this.maxEntrySize=f||this.#s,this.sizeCalculation=p,this.sizeCalculation){if(!this.#s&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==m&&"function"!=typeof m)throw new TypeError("memoMethod must be a function if defined");if(this.#o=m,void 0!==g&&"function"!=typeof g)throw new TypeError("fetchMethod must be a function if specified");if(this.#n=g,this.#k=!!g,this.#h=new Map,this.#l=new Array(e).fill(void 0),this.#d=new Array(e).fill(void 0),this.#u=new k(e),this.#f=new k(e),this.#p=0,this.#g=0,this.#m=C.create(e),this.#a=0,this.#c=0,"function"==typeof c&&(this.#i=c),"function"==typeof h?(this.#r=h,this.#v=[]):(this.#r=void 0,this.#v=void 0),this.#w=!!this.#i,this.#S=!!this.#r,this.noDisposeOnSet=!!l,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!y,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!w,0!==this.maxEntrySize){if(0!==this.#s&&!T(this.#s))throw new TypeError("maxSize must be a positive integer if specified");if(!T(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#T()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!_,this.updateAgeOnGet=!!n,this.updateAgeOnHas=!!o,this.ttlResolution=T(i)||0===i?i:1,this.ttlAutopurge=!!r,this.ttl=s||0,this.ttl){if(!T(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(0===this.#e&&0===this.ttl&&0===this.#s)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#s){const t="LRU_CACHE_UNBOUNDED";if((t=>!E.has(t))(t)){E.add(t);A("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,D)}}}getRemainingTTL(t){return this.#h.has(t)?1/0:0}#F(){const t=new R(this.#e),e=new R(this.#e);this.#b=t,this.#y=e,this.#R=(s,i,r=x.now())=>{if(e[s]=0!==i?r:0,t[s]=i,0!==i&&this.ttlAutopurge){const t=setTimeout((()=>{this.#O(s)&&this.#C(this.#l[s],"expire")}),i+1);t.unref&&t.unref()}},this.#D=s=>{e[s]=0!==t[s]?x.now():0},this.#j=(r,n)=>{if(t[n]){const o=t[n],a=e[n];if(!o||!a)return;r.ttl=o,r.start=a,r.now=s||i();const c=r.now-a;r.remainingTTL=o-c}};let s=0;const i=()=>{const t=x.now();if(this.ttlResolution>0){s=t;const e=setTimeout((()=>s=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=r=>{const n=this.#h.get(r);if(void 0===n)return 0;const o=t[n],a=e[n];if(!o||!a)return 1/0;return o-((s||i())-a)},this.#O=r=>{const n=e[r],o=t[r];return!!o&&!!n&&(s||i())-n>o}}#D=()=>{};#j=()=>{};#R=()=>{};#O=()=>!1;#T(){const t=new R(this.#e);this.#c=0,this.#_=t,this.#$=e=>{this.#c-=t[e],t[e]=0},this.#I=(t,e,s,i)=>{if(this.#x(e))return 0;if(!T(s)){if(!i)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof i)throw new TypeError("sizeCalculation must be a function");if(s=i(e,t),!T(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return s},this.#M=(e,s,i)=>{if(t[e]=s,this.#s){const s=this.#s-t[e];for(;this.#c>s;)this.#N(!0)}this.#c+=t[e],i&&(i.entrySize=s,i.totalCalculatedSize=this.#c)}}#$=t=>{};#M=(t,e,s)=>{};#I=(t,e,s,i)=>{if(s||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#A({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#g;this.#U(e)&&(!t&&this.#O(e)||(yield e),e!==this.#p);)e=this.#f[e]}*#L({allowStale:t=this.allowStale}={}){if(this.#a)for(let e=this.#p;this.#U(e)&&(!t&&this.#O(e)||(yield e),e!==this.#g);)e=this.#u[e]}#U(t){return void 0!==t&&this.#h.get(this.#l[t])===t}*entries(){for(const t of this.#A())void 0===this.#d[t]||void 0===this.#l[t]||this.#x(this.#d[t])||(yield[this.#l[t],this.#d[t]])}*rentries(){for(const t of this.#L())void 0===this.#d[t]||void 0===this.#l[t]||this.#x(this.#d[t])||(yield[this.#l[t],this.#d[t]])}*keys(){for(const t of this.#A()){const e=this.#l[t];void 0===e||this.#x(this.#d[t])||(yield e)}}*rkeys(){for(const t of this.#L()){const e=this.#l[t];void 0===e||this.#x(this.#d[t])||(yield e)}}*values(){for(const t of this.#A()){void 0===this.#d[t]||this.#x(this.#d[t])||(yield this.#d[t])}}*rvalues(){for(const t of this.#L()){void 0===this.#d[t]||this.#x(this.#d[t])||(yield this.#d[t])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const s of this.#A()){const i=this.#d[s],r=this.#x(i)?i.__staleWhileFetching:i;if(void 0!==r&&t(r,this.#l[s],this))return this.get(this.#l[s],e)}}forEach(t,e=this){for(const s of this.#A()){const i=this.#d[s],r=this.#x(i)?i.__staleWhileFetching:i;void 0!==r&&t.call(e,r,this.#l[s],this)}}rforEach(t,e=this){for(const s of this.#L()){const i=this.#d[s],r=this.#x(i)?i.__staleWhileFetching:i;void 0!==r&&t.call(e,r,this.#l[s],this)}}purgeStale(){let t=!1;for(const e of this.#L({allowStale:!0}))this.#O(e)&&(this.#C(this.#l[e],"expire"),t=!0);return t}info(t){const e=this.#h.get(t);if(void 0===e)return;const s=this.#d[e],i=this.#x(s)?s.__staleWhileFetching:s;if(void 0===i)return;const r={value:i};if(this.#b&&this.#y){const t=this.#b[e],s=this.#y[e];if(t&&s){const e=t-(x.now()-s);r.ttl=e,r.start=Date.now()}}return this.#_&&(r.size=this.#_[e]),r}dump(){const t=[];for(const e of this.#A({allowStale:!0})){const s=this.#l[e],i=this.#d[e],r=this.#x(i)?i.__staleWhileFetching:i;if(void 0===r||void 0===s)continue;const n={value:r};if(this.#b&&this.#y){n.ttl=this.#b[e];const t=x.now()-this.#y[e];n.start=Math.floor(Date.now()-t)}this.#_&&(n.size=this.#_[e]),t.unshift([s,n])}return t}load(t){this.clear();for(const[e,s]of t){if(s.start){const t=Date.now()-s.start;s.start=x.now()-t}this.set(e,s.value,s)}}set(t,e,s={}){if(void 0===e)return this.delete(t),this;const{ttl:i=this.ttl,start:r,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=s;let{noUpdateTTL:c=this.noUpdateTTL}=s;const h=this.#I(t,e,s.size||0,o);if(this.maxEntrySize&&h>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#C(t,"set"),this;let l=0===this.#a?void 0:this.#h.get(t);if(void 0===l)l=0===this.#a?this.#g:0!==this.#m.length?this.#m.pop():this.#a===this.#e?this.#N(!1):this.#a,this.#l[l]=t,this.#d[l]=e,this.#h.set(t,l),this.#u[this.#g]=l,this.#f[l]=this.#g,this.#g=l,this.#a++,this.#M(l,h,a),a&&(a.set="add"),c=!1;else{this.#z(l);const s=this.#d[l];if(e!==s){if(this.#k&&this.#x(s)){s.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:e}=s;void 0===e||n||(this.#w&&this.#i?.(e,t,"set"),this.#S&&this.#v?.push([e,t,"set"]))}else n||(this.#w&&this.#i?.(s,t,"set"),this.#S&&this.#v?.push([s,t,"set"]));if(this.#$(l),this.#M(l,h,a),this.#d[l]=e,a){a.set="replace";const t=s&&this.#x(s)?s.__staleWhileFetching:s;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update")}if(0===i||this.#b||this.#F(),this.#b&&(c||this.#R(l,i,r),a&&this.#j(a,l)),!n&&this.#S&&this.#v){const t=this.#v;let e;for(;e=t?.shift();)this.#r?.(...e)}return this}pop(){try{for(;this.#a;){const t=this.#d[this.#p];if(this.#N(!0),this.#x(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#S&&this.#v){const t=this.#v;let e;for(;e=t?.shift();)this.#r?.(...e)}}}#N(t){const e=this.#p,s=this.#l[e],i=this.#d[e];return this.#k&&this.#x(i)?i.__abortController.abort(new Error("evicted")):(this.#w||this.#S)&&(this.#w&&this.#i?.(i,s,"evict"),this.#S&&this.#v?.push([i,s,"evict"])),this.#$(e),t&&(this.#l[e]=void 0,this.#d[e]=void 0,this.#m.push(e)),1===this.#a?(this.#p=this.#g=0,this.#m.length=0):this.#p=this.#u[e],this.#h.delete(s),this.#a--,e}has(t,e={}){const{updateAgeOnHas:s=this.updateAgeOnHas,status:i}=e,r=this.#h.get(t);if(void 0!==r){const t=this.#d[r];if(this.#x(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#O(r))return s&&this.#D(r),i&&(i.has="hit",this.#j(i,r)),!0;i&&(i.has="stale",this.#j(i,r))}else i&&(i.has="miss");return!1}peek(t,e={}){const{allowStale:s=this.allowStale}=e,i=this.#h.get(t);if(void 0===i||!s&&this.#O(i))return;const r=this.#d[i];return this.#x(r)?r.__staleWhileFetching:r}#E(t,e,s,i){const r=void 0===e?void 0:this.#d[e];if(this.#x(r))return r;const n=new L,{signal:o}=s;o?.addEventListener("abort",(()=>n.abort(o.reason)),{signal:n.signal});const a={signal:n.signal,options:s,context:i},c=(i,r=!1)=>{const{aborted:o}=n.signal,c=s.ignoreFetchAbort&&void 0!==i;if(s.status&&(o&&!r?(s.status.fetchAborted=!0,s.status.fetchError=n.signal.reason,c&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),o&&!c&&!r)return h(n.signal.reason);const d=l;return this.#d[e]===l&&(void 0===i?d.__staleWhileFetching?this.#d[e]=d.__staleWhileFetching:this.#C(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,i,a.options))),i},h=i=>{const{aborted:r}=n.signal,o=r&&s.allowStaleOnFetchAbort,a=o||s.allowStaleOnFetchRejection,c=a||s.noDeleteOnFetchRejection,h=l;if(this.#d[e]===l){!c||void 0===h.__staleWhileFetching?this.#C(t,"fetch"):o||(this.#d[e]=h.__staleWhileFetching)}if(a)return s.status&&void 0!==h.__staleWhileFetching&&(s.status.returnedStale=!0),h.__staleWhileFetching;if(h.__returned===h)throw i};s.status&&(s.status.fetchDispatched=!0);const l=new Promise(((e,i)=>{const o=this.#n?.(t,r,a);o&&o instanceof Promise&&o.then((t=>e(void 0===t?void 0:t)),i),n.signal.addEventListener("abort",(()=>{s.ignoreFetchAbort&&!s.allowStaleOnFetchAbort||(e(void 0),s.allowStaleOnFetchAbort&&(e=t=>c(t,!0)))}))})).then(c,(t=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=t),h(t)))),d=Object.assign(l,{__abortController:n,__staleWhileFetching:r,__returned:void 0});return void 0===e?(this.set(t,d,{...a.options,status:void 0}),e=this.#h.get(t)):this.#d[e]=d,d}#x(t){if(!this.#k)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof L}async fetch(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:l=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:u=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:m,signal:v}=e;if(!this.#k)return m&&(m.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:r,status:m});const _={allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:r,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:c,noUpdateTTL:h,noDeleteOnFetchRejection:l,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:f,ignoreFetchAbort:u,status:m,signal:v};let y=this.#h.get(t);if(void 0===y){m&&(m.fetch="miss");const e=this.#E(t,y,_,p);return e.__returned=e}{const e=this.#d[y];if(this.#x(e)){const t=s&&void 0!==e.__staleWhileFetching;return m&&(m.fetch="inflight",t&&(m.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const r=this.#O(y);if(!g&&!r)return m&&(m.fetch="hit"),this.#z(y),i&&this.#D(y),m&&this.#j(m,y),e;const n=this.#E(t,y,_,p),o=void 0!==n.__staleWhileFetching&&s;return m&&(m.fetch=r?"stale":"refresh",o&&r&&(m.returnedStale=!0)),o?n.__staleWhileFetching:n.__returned=n}}async forceFetch(t,e={}){const s=await this.fetch(t,e);if(void 0===s)throw new Error("fetch() returned undefined");return s}memo(t,e={}){const s=this.#o;if(!s)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:r,...n}=e,o=this.get(t,n);if(!r&&void 0!==o)return o;const a=s(t,o,{options:n,context:i});return this.set(t,a,n),a}get(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:n}=e,o=this.#h.get(t);if(void 0!==o){const e=this.#d[o],a=this.#x(e);return n&&this.#j(n,o),this.#O(o)?(n&&(n.get="stale"),a?(n&&s&&void 0!==e.__staleWhileFetching&&(n.returnedStale=!0),s?e.__staleWhileFetching:void 0):(r||this.#C(t,"expire"),n&&s&&(n.returnedStale=!0),s?e:void 0)):(n&&(n.get="hit"),a?e.__staleWhileFetching:(this.#z(o),i&&this.#D(o),e))}n&&(n.get="miss")}#W(t,e){this.#f[e]=t,this.#u[t]=e}#z(t){t!==this.#g&&(t===this.#p?this.#p=this.#u[t]:this.#W(this.#f[t],this.#u[t]),this.#W(this.#g,t),this.#g=t)}delete(t){return this.#C(t,"delete")}#C(t,e){let s=!1;if(0!==this.#a){const i=this.#h.get(t);if(void 0!==i)if(s=!0,1===this.#a)this.#B(e);else{this.#$(i);const s=this.#d[i];if(this.#x(s)?s.__abortController.abort(new Error("deleted")):(this.#w||this.#S)&&(this.#w&&this.#i?.(s,t,e),this.#S&&this.#v?.push([s,t,e])),this.#h.delete(t),this.#l[i]=void 0,this.#d[i]=void 0,i===this.#g)this.#g=this.#f[i];else if(i===this.#p)this.#p=this.#u[i];else{const t=this.#f[i];this.#u[t]=this.#u[i];const e=this.#u[i];this.#f[e]=this.#f[i]}this.#a--,this.#m.push(i)}}if(this.#S&&this.#v?.length){const t=this.#v;let e;for(;e=t?.shift();)this.#r?.(...e)}return s}clear(){return this.#B("delete")}#B(t){for(const e of this.#L({allowStale:!0})){const s=this.#d[e];if(this.#x(s))s.__abortController.abort(new Error("deleted"));else{const i=this.#l[e];this.#w&&this.#i?.(s,i,t),this.#S&&this.#v?.push([s,i,t])}}if(this.#h.clear(),this.#d.fill(void 0),this.#l.fill(void 0),this.#b&&this.#y&&(this.#b.fill(0),this.#y.fill(0)),this.#_&&this.#_.fill(0),this.#p=0,this.#g=0,this.#m.length=0,this.#c=0,this.#a=0,this.#S&&this.#v){const t=this.#v;let e;for(;e=t?.shift();)this.#r?.(...e)}}}function j(t){return t.pref}function $(t){return`${t.county||""}${t.city}${t.ward||""}`}function I(t){return`${t.oaza_cho||""}${t.chome||""}${t.koaza||""}`}function M(t){return[t.blk_num,t.rsdt_num,t.rsdt_num2].filter(Boolean).join("-")}function N(t){return[t.prc_num1,t.prc_num2,t.prc_num3].filter(Boolean).join("-")}const U=new D({max:f.cacheSize});function W(e,s){return t(this,void 0,void 0,(function*(){let t=U.get(e);return void 0!==t||(t=yield s(),U.set(e,t)),t}))}let B;const P=new Map;let G;const q={};let K;const H=t=>G=t,Q=t=>{const e=P.get(t.code);if(void 0!==e)return e;const s=t.cities;s.sort(((t,e)=>$(t).length-$(e).length));const i=s.map((t=>{const e=$(t);let s=`^${b(e)}`;return e.match(/(町|村)$/)&&(s=`^${b(e).replace(/(.+?)郡/,"($1郡)?")}`),[t,s]}));return P.set(t.code,i),i};function J(e,s,i,r,n){return t(this,void 0,void 0,(function*(){const t=j(s),o=$(i);return(yield p(["",encodeURI(t),encodeURI(`${o}-${e}.txt?v=${n}`)].join("/"),{offset:r.start,length:r.length})).text()}))}function V(t){const e=t.indexOf("\n"),s=t.slice(e+1),i=S.parse(s,{header:!0}).data,r=[];for(const t of i){const e=t.lng&&t.lat?[parseFloat(t.lng),parseFloat(t.lat)]:void 0;"blk_num"in t?r.push({blk_num:t.blk_num,rsdt_num:t.rsdt_num,rsdt_num2:t.rsdt_num2,point:e}):"prc_num1"in t&&r.push({prc_num1:t.prc_num1,prc_num2:t.prc_num2,prc_num3:t.prc_num3,point:e})}return r}const Y=t=>{const e=t.match(/.町/g);if(!e)return!1;return u.findKanjiNumbers(e[0]).length>0},Z=(e,s,i)=>t(void 0,void 0,void 0,(function*(){return W(`${e.code}-${s.code}`,(()=>t(void 0,void 0,void 0,(function*(){const r=yield((e,s,i)=>t(void 0,void 0,void 0,(function*(){const t=j(e),r=$(s),n=`${t}-${r}`,o=q[n];if(void 0!==o)return o;const a=yield p(["",encodeURI(t),encodeURI(r)+`.json?v=${i}`].join("/"),{}),c=yield a.json();return q[n]=c})))(e,s,i),n=r.data,o=new Set(n.map((t=>I(t)))),a=[],c="京都市"===s.city;for(const t of n){a.push(t);const e=I(t);if(-1===e.indexOf("町"))continue;const s=e.replace(/(?!^町)町/g,"");c||o.has(s)||o.has(`大字${s}`)||Y(e)||a.push({machiaza_id:t.machiaza_id,point:t.point,oaza_cho:s,originalTown:t})}a.sort(((t,e)=>{let s=I(t).length,i=I(e).length;return I(t).startsWith("大字")&&(s-=2),I(e).startsWith("大字")&&(i-=2),i-s}));const h=a.map((t=>{const e=b(I(t).replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,"[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]").replace(/大?字/g,"(大?字)?").replace(/([壱一二三四五六七八九十]+|[１２３４５６７８９０]+)(丁目?|番(町|丁)|条|軒|線|(の|ノ)町|地割|号)/g,(t=>{const e=[];if(e.push(t.toString().replace(/(丁目?|番(町|丁)|条|軒|線|(の|ノ)町|地割|号)/,"")),t.match(/^壱/))e.push("一"),e.push("1"),e.push("１");else{const s=t.replace(/([一二三四五六七八九十]+)/g,(t=>g(t))).replace(/([１２３４５６７８９０]+)/g,(t=>u.kanji2number(t).toString())).replace(/(丁目?|番(町|丁)|条|軒|線|(の|ノ)町|地割|号)/,"");e.push(s.toString())}return`(${e.join("|")})((丁|町)目?|番(町|丁)|条|軒|線|の町?|地割|号|[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━])`})));return["originalTown"in t?t.originalTown:t,e]}));for(const t of a){const e=I(t).match(/([^一二三四五六七八九十]+)([一二三四五六七八九十]+)(丁目?)/);if(!e)continue;const s=e[1],i=e[2],r=b(`^${s}(${i}|${g(i)})`);h.push([t,r])}return h}))))}));function X(t){return{lat:t.point[1],lng:t.point[0],level:1}}function tt(t){return{lat:t.point[1],lng:t.point[0],level:2}}function et(t){if(t.point)return{lat:t.point[1],lng:t.point[0],level:3}}function st(t){if(t.point)return{lat:t.point[1],lng:t.point[0],level:8}}function it(t,e){return t?e?t.level>e.level?t:e:t:e}function rt(t){if(!t)return;const e=Object.assign({},t);return delete e.cities,e}function nt(t){if(!t)return;const e=Object.assign({},t);return delete e.csv_ranges,e}const ot=f,at={level:8},ct=(e,s,i,r)=>t(void 0,void 0,void 0,(function*(){e=e.trim().replace(/^大字/,"");const t=yield Z(s,i,r),n=["^"];"京都市"===i.city&&n.push(".*");for(const s of n)for(const[i,r]of t){const t=new RegExp(`${s}${r}`),n=e.match(t);if(n)return{town:i,other:e.substring(n[0].length)}}}));function ht(e,s,i,r,n){return t(this,void 0,void 0,(function*(){const o=e.match(/^([1-9][0-9]*)(?:-([1-9][0-9]*))?(?:-([1-9][0-9]*))?/);if(!o)return{rest:e};if(r.rsdt){const a=yield((e,s,i,r)=>t(void 0,void 0,void 0,(function*(){var n;const o=null===(n=i.csv_ranges)||void 0===n?void 0:n.住居表示;return o?yield W(`住居表示-${e.code}-${s.code}-${I(i)}`,(()=>t(void 0,void 0,void 0,(function*(){const t=V(yield J("住居表示",e,s,o,r));return t.sort(((t,e)=>{const s=[t.blk_num,t.rsdt_num,t.rsdt_num2].filter((t=>!!t)).join("-"),i=[e.blk_num,e.rsdt_num,e.rsdt_num2].filter((t=>!!t)).join("-");return i.length-s.length})),t})))):[]})))(s,i,r,n);for(const t of a){const s=M(t);if(o[0]===s)return{rsdt:t,rest:e.substring(s.length)}}}else{const a=yield((e,s,i,r)=>t(void 0,void 0,void 0,(function*(){var n;const o=null===(n=i.csv_ranges)||void 0===n?void 0:n.地番;return o?yield W(`地番-${e.code}-${s.code}-${I(i)}`,(()=>t(void 0,void 0,void 0,(function*(){const t=V(yield J("地番",e,s,o,r));return t.sort(((t,e)=>{const s=[t.prc_num1,t.prc_num2,t.prc_num3].filter((t=>!!t)).join("-"),i=[e.prc_num1,e.prc_num2,e.prc_num3].filter((t=>!!t)).join("-");return i.length-s.length})),t})))):[]})))(s,i,r,n);for(const t of a){const s=N(t);if(o[0]===s)return{chiban:t,rest:e.substring(s.length)}}}return{rest:e}}))}const lt="3.1.3",dt=ot,ut=(e,...s)=>t(void 0,[e,...s],void 0,(function*(e,s=at){var i;const r=Object.assign(Object.assign({},at),s);null!==(i=r.geoloniaApiKey)&&void 0!==i||(r.geoloniaApiKey=ot.geoloniaApiKey);let n=e.normalize("NFC").replace(/　/g," ").replace(/ +/g," ").replace(/([０-９Ａ-Ｚａ-ｚ]+)/g,(t=>m(t))).replace(/([0-9０-９一二三四五六七八九〇十百千][-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━])|([-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━])[0-9０-９一二三四五六七八九〇十]/g,(t=>t.replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,"-"))).replace(/(.+)(丁目?|番(町|地|丁)|条|軒|線|(の|ノ)町|地割)/,(t=>t.replace(/ /g,""))).replace(/(.+)((郡.+(町|村))|((市|巿).+(区|區)))/,(t=>t.replace(/ /g,""))).replace(/.+?[0-9一二三四五六七八九〇十百千]-/,(t=>t.replace(/ /g,"")));let o,a,c,h,l,d=0;const f=yield t(void 0,void 0,void 0,(function*(){if(void 0!==G)return G;const t=yield p(".json",{}),e=yield t.json();return H(e)})),_=f.meta.updated,y=(t=>{if(B)return B;const e=t.data;return B=e.map((t=>{const e=t.pref.replace(/(都|道|府|県)$/,"");return[t,`^${e}(都|道|府|県)?`]})),B})(f),b=(t=>{if(void 0!==K)return K;const e=t.data,s=e.map((t=>t.pref.replace(/[都|道|府|県]$/,"")));K=[];for(const t of e)for(const e of t.cities){const i=$(e);for(let e=0;e<s.length;e++)0===i.indexOf(s[e])&&K.push([`${t.pref}${i}`,`^${i}`])}return K})(f);for(const[t,e]of b){if(n.match(e)){n=n.replace(new RegExp(e),t);break}}for(const[t,e]of y){const s=n.match(e);if(s){o=t,n=n.substring(s[0].length),h=X(o);break}}if(!o){const t=[];for(const e of f.data){const s=Q(e);n=n.trim();for(const[i,r]of s){const s=n.match(r);s&&t.push({pref:e,city:i,other:n.substring(s[0].length)})}}if(1===t.length)o=t[0].pref;else for(const e of t){const t=yield ct(e.other,e.pref,e.city,_);t&&(o=e.pref,a=e.city,c=t.town,n=t.other,h=it(h,et(c)))}}if(o&&r.level>=2){const t=Q(o);n=n.trim();for(const[e,s]of t){const t=n.match(s);if(t){a=e,h=it(h,tt(a)),n=n.substring(t[0].length);break}}}if(o&&a&&r.level>=3){const t=yield ct(n,o,a,_);t&&(c=t.town,n=t.other,h=it(h,et(c))),c&&(n=n.replace(/^-/,"").replace(/([0-9]+)(丁目)/g,(t=>t.replace(/([0-9]+)/g,(t=>u.number2kanji(Number(t)))))).replace(/(([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)(番地?)([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)号)\s*(.+)/,"$1 $5").replace(/([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)\s*(番地?)\s*([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)\s*号?/,"$1-$3").replace(/([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)番(地|$)/,"$1").replace(/([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)の/g,"$1-").replace(/([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,(t=>g(t).replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,"-"))).replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)/g,(t=>g(t).replace(/[-－﹣−‐⁃‑‒–—﹘―⎯⏤ーｰ─━]/g,"-"))).replace(/([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)-/,(t=>g(t))).replace(/-([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)/,(t=>g(t))).replace(/-[^0-9]([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)/,(t=>g(m(t)))).replace(/([0-9]+|[〇一二三四五六七八九十百千零壱弐参肆伍陸漆捌玖拾]+)$/,(t=>g(t))).trim())}if(n=((t,e,s,i)=>{let r=i;for(let i=0;i<v.length;i++){const n=v[i];n.pref===t&&n.city===e&&n.town===s&&(r=r.replace(new RegExp(n.pattern),n.result))}return r})(o?j(o):"",a?$(a):"",c?I(c):"",n),o&&(d+=1),a&&(d+=1),c&&(d+=1),r.level<=3||d<3){return{pref:o?j(o):void 0,city:a?$(a):void 0,town:c?I(c):void 0,other:n,level:d,point:h,metadata:{input:e,prefecture:rt(o),city:a,machiAza:nt(c)}}}const w=yield ht(n,o,a,c,_);w.rsdt?(l=M(w.rsdt),n=w.rest,h=it(h,st(w.rsdt)),d=8):w.chiban&&(l=N(w.chiban),n=w.rest,h=it(h,st(w.chiban)),d=8);return{pref:o?j(o):void 0,city:a?$(a):void 0,town:c?I(c):void 0,addr:l,level:d,point:h,other:n,metadata:{input:e,prefecture:rt(o),city:a,machiAza:nt(c),rsdt:w.rsdt,chiban:w.chiban}}}));export{dt as config,ut as normalize,lt as version};
//# sourceMappingURL=main-esm.mjs.map
